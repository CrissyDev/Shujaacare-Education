<div class="dashboard-container" *ngIf="!loading; else loadingTpl">
  <div class="content">
    <h2 class="section-title">Welcome back, {{ displayName }}!</h2>
    <p class="section-subtitle">Hereâ€™s your current learning progress.</p>

    <div class="learning-grid">
      <div class="learning-card" *ngFor="let item of progress">
        <div class="card-header">
          <div class="title">{{ item.title }}</div>
          <div class="percentage">{{ (item.completed / item.total) * 100 | number:'1.0-0' }}%</div>
        </div>
        <div class="progress-bar">
          <div
            class="progress"
            [style.width.%]="(item.completed / item.total) * 100"
          ></div>
        </div>
        <div class="details">
          <span>{{ item.completed }} of {{ item.total }} completed</span>
          <span *ngIf="item.lastAccessed">Last accessed: {{ item.lastAccessed | date:'shortDate' }}</span>
        </div>
      </div>
    </div>

    <div class="user-summary">
      <div class="summary-card">
        <div class="summary-label">Total progress points</div>
        <div class="summary-value">{{ points }}</div>
      </div>
    </div>

    <div class="error" *ngIf="errorMessage">{{ errorMessage }}</div>
  </div>
</div>

<ng-template #loadingTpl>
  <div class="loading">Loading your dashboard...</div>
</ng-template>
